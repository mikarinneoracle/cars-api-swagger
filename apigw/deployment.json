{
  "requestPolicies": {
    "authentication": {
      "functionId": "{AUTH_FUNC_OCID}",
      "isAnonymousAccessAllowed": true,
      "tokenHeader": "Authorization",
      "type": "CUSTOM_AUTHENTICATION"
    }
  },
  "routes": [
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}:8080/signup/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/signup/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "ANONYMOUS"
        }
      }
    },
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}:3000/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/api-100/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "ANONYMOUS"
        }
      }
    },
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}:3000/docs/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/cars-100/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "ANONYMOUS"
        }
      }
    },
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}:3001/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/api-200/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "AUTHENTICATION_ONLY"
        },
        "headerTransformations": {
          "setHeaders": {
            "items": [
              {
                "ifExists": "OVERWRITE",
                "name": "username",
                "values": [
                  "${request.auth[username]}"
                ]
              }
            ]
          }
        }
      }
    },
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}:3002/docs/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/cars-300/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "ANONYMOUS"
        }
      }
    },
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}:3002/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/api-300/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "AUTHENTICATION_ONLY"
        },
        "headerTransformations": {
          "setHeaders": {
            "items": [
              {
                "ifExists": "OVERWRITE",
                "name": "username",
                "values": [
                  "${request.auth[username]}"
                ]
              }
            ]
          }
        }
      }
    },
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}:3001/docs/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/cars-200/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "ANONYMOUS"
        }
      }
    },
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}/public/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/public/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "ANONYMOUS"
        }
      }
    },
    {
      "backend": {
        "body": null,
        "headers": [
          {
            "name": "Location",
            "value": "/public/index.html"
          }
        ],
        "status": 301,
        "type": "STOCK_RESPONSE_BACKEND"
      },
      "methods": [
        "ANY"
      ],
      "path": "/",
      "requestPolicies": {
        "authorization": {
          "type": "ANONYMOUS"
        }
      }
    },
    {
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "http://{CI_PRIVATE_IP}/private/${request.path[path]}"
      },
      "methods": [
        "ANY"
      ],
      "path": "/private/{path*}",
      "requestPolicies": {
        "authorization": {
          "type": "AUTHENTICATION_ONLY"
        }
      }
    }
  ]
}
